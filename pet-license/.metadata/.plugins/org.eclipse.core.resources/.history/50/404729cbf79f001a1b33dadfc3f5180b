<section id="site-content">
<section id="main-content">
			<section>
			<section class="panel" style="background-color: #999">
				<header class="panel-heading">Registration Report</header>
				<div class="panel-body">
				<br><br>
					<div class="position-center" style="width:90%">
					<div> 
					<div  style="float: left;width:100%">
									<input type="hidden" id="headId" value="${headId}">
									
					<h3>Family Members Details for Head with Id ${headId}
					<div class="agile-tables">
					<div class="w3l-table-info" id="tableDiv">
					<table class="position-center" id="elist" style="table-layout: fixed;width:100%;word-wrap:break-word;border: 1px solid black;">
						<thead>
						  <tr>
						 	<th>Sr No.</th>
							<th>Name of Member </th>
							<th>Age</th>
							<th>Disease</th>
							<th>Educational Qualification</th>
							<th>Occupation</th>
							
						</tr>
						</thead>
						<tbody id="elist-body">
						  
						</tbody>
					  </table>
					</div></div><br></div></div>
					
					<input style="float:right;display:none" type=button id="exportButton" value="Export Data to Excel" ></div>
			</section>
			</section>
			</section>
			</section>
			
<!-- Template created and distributed by Colorlib -->		
<link rel="stylesheet" type="text/css" href="/covid-new/resources/css/table-style.css" />
<script src="/covid-new/resources/js/data.table.js"></script>
<script src="/covid-new/resources/js/table2excel.js"></script>
			
			 <script type="text/javascript">
	            
	            $(document).ready(function () {
	            	var headId=$('#headId').val();
	            	$.ajax({  
		    		    url: 'family-details-api',  
		    		    data:{"headId":headId},
		    		    type: 'GET',
		    		   success: function(data, textStatus, xhr) {  
		    		    var htm = "";
		    		    var count=1;
		    		    $(data).each(function (index, item) {
		    		    htm = htm+"<tr>" +
		    		    "<td>"+count+"</td>" +
		    		    "<td>"+item.name+"</td>" +
			    		"<td>"+item.age+"</td>" +
			    		"<td>"+item.disease+"</td>"+
			    		"<td>"+item.eduQualification+"</td>"+
			    		"<td>"+item.occupation+"</td>"+
						"</tr>";
						count=count+1;
		    				    });

		    		$('#elist-body').html(htm);
		    		$('#elist').DataTable();	
		    		$('#exportButton').show();
		    		
		    		    },
		    		    error: function(xhr, textStatus, errorThrown) {  
		    		    }
		    		    });
	            });
	    		
	    		$(function () {    
	    		            $("#exportButton").click(function () {    
	    		            	    $("#elist").table2excel({    
	    		                    filename: "covid_data.xls"    
	    		                });    
	    		            });    
	    		        }); 
	    	
        </script>
